{
  "name": "2-way NowSMS gateway",
  "version": "1.0.11",
  "vendor": "SysCo systemes de communication sa",
  "license": "MIT",
  "url": "https://www.sysco.ch/",
  "buildhost": "build.sysco.ch",
  "builddate": "2021-01-07 17:00:00 UTC",
  "change_log": [
    {
      "version": "1.0.11",
      "date": "2021-01-07 17:00:00 UTC",
      "log": "Regexp to ignore content or sender"
    },
    {
      "version": "1.0.9",
      "date": "2021-01-07 14:35:00 UTC",
      "log": "2-way SMS implementation"
    },
    {
      "version": "1.0.0",
      "date": "2021-01-07 08:00:00 UTC",
      "log": "Initial version (send only)"
    }
  ],
  "description": [
    {
      "language": "en",
      "text": "2-way SMS implementation for NowSMS local gateway (https://www.nowsms.com/)"
    }
  ],
  "files": [
    {
      "location": "app/models/channel/driver/sms/nowsms.rb",
      "permission": 644,
      "encode": "base64",
      "content": "IyBWZXJzaW9uIDEuMC4xMQ0KIw0KIyBXZWJob29rIHBhcmFtZXRlcnMgaW4gTm93U01TIDogLz9TbXNNZXNzYWdlU2lkPUBARlVMTFNNU0BAJkFjY291bnRTaWQ9c21zJkZyb209QEBTRU5ERVJAQCZUbz1AQFJFQ0lQQEAmQm9keT1AQEZVTExTTVNAQCZJZ25vcmVSZWdleHA9Li4uDQojDQojIE5vd1NNUyBkb2N1bWVudGF0aW9uIDogaHR0cHM6Ly93d3cubm93c21zLmNvbS9kb2MvMi13YXktc21zLXN1cHBvcnQNCiMNCiMgQmFzZWQgb24gYXBwL21vZGVscy9jaGFubmVsL2RyaXZlci9zbXMvdHdpbGlvLnJiDQojIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9sY3gvemFtbWFkLXNtcy1jbG91ZHZveA0KIw0KIyBJbiBvcmRlciB0byBtYWtlIGFuIGluc3RhbGxhYmxlIHBhY2thZ2UsIHRoaXMgZmlsZSBuZWVkIHRvDQojIGJlIGJhc2U2NCBlbmNvZGVkIGluc2lkZSBub3dzbXMtc21zLnN6cG0NCiMgKGJ5IHVzaW5nIGZvciBleGFtcGxlIGh0dHBzOi8vYmFzZTY0Lmd1cnUvY29udmVydGVyL2VuY29kZS90ZXh0KQ0KIw0KIyBDb3B5cmlnaHQgKGMpIDIwMjEgU3lzQ28gc3lzdGVtZXMgZGUgY29tbXVuaWNhdGlvbiBzYSAtIGh0dHBzOi8vd3d3LnN5c2NvLmNoDQoNCmNsYXNzIENoYW5uZWw6OkRyaXZlcjo6U21zOjpOb3dzbXMNCiAgTkFNRSA9ICdzbXMvbm93c21zJy5mcmVlemUNCg0KICBkZWYgZmV0Y2hhYmxlPyhfY2hhbm5lbCkNCiAgICBmYWxzZQ0KICBlbmQNCg0KICBkZWYgc2VuZChvcHRpb25zLCBhdHRyLCBfbm90aWZpY2F0aW9uID0gZmFsc2UpDQogICAgUmFpbHMubG9nZ2VyLmluZm8gIlNlbmRpbmcgU01TIHRvICN7YXR0cls6cmVjaXBpZW50XX0iDQoNCiAgICByZXR1cm4gdHJ1ZSBpZiBTZXR0aW5nLmdldCgnaW1wb3J0X21vZGUnKQ0KDQogICAgUmFpbHMubG9nZ2VyLmluZm8gIkJhY2tlbmQgc2VuZGluZyBOb3dTTVMgU01TIHRvICN7YXR0cls6cmVjaXBpZW50XX0iDQogICAgYmVnaW4NCiAgICAgIGlmIFNldHRpbmcuZ2V0KCdkZXZlbG9wZXJfbW9kZScpICE9IHRydWUNCiAgICAgICAgY29ubiA9IEZhcmFkYXkubmV3KHVybDogb3B0aW9uc1s6Z2F0ZXdheV0pDQogICAgICAgIGNvbm4uYmFzaWNfYXV0aChvcHRpb25zWzphY2NvdW50X2lkXSwgb3B0aW9uc1s6dG9rZW5dKQ0KICAgICAgICByZXNwb25zZSA9IGNvbm4uZ2V0KCIvIiwgeyA6UGhvbmVOdW1iZXIgPT4gYXR0cls6cmVjaXBpZW50XS5yZW1vdmUoL1xELyksIDpUZXh0ID0+IGF0dHJbOm1lc3NhZ2VdfSkNCiAgICAgICAgcmFpc2UgcmVzcG9uc2UuYm9keSBpZiAhcmVzcG9uc2UuYm9keS5tYXRjaD8oJ01lc3NhZ2UgU3VibWl0dGVkJykNCiAgICAgIGVuZA0KDQogICAgICB0cnVlDQogICAgcmVzY3VlID0+IGUNCiAgICAgIFJhaWxzLmxvZ2dlci5kZWJ1ZyAiTm93U01TIGVycm9yOiAje2UuaW5zcGVjdH0iDQogICAgICByYWlzZSBlDQogICAgZW5kDQogIGVuZA0KDQogIGRlZiBwcm9jZXNzKF9vcHRpb25zLCBhdHRyLCBjaGFubmVsKQ0KICAgIFJhaWxzLmxvZ2dlci5pbmZvICJSZWNlaXZpbmcgU01TIGZyb20gcmVjaXBpZW50ICN7YXR0cls6RnJvbV19Ig0KDQogICAgIyByZWplY3Qgc3BlY2lmaWMgY29udGVudHMNCiAgICBpZiBfb3B0aW9uc1s6cmVqZWN0X21zZ10ucHJlc2VudD8NCiAgICAgIHBhdHRlcm4gPSBSZWdleHAubmV3KF9vcHRpb25zWzpyZWplY3RfbXNnXSkuZnJlZXplDQogICAgICBpZiBwYXR0ZXJuLm1hdGNoPyhhdHRyWzpCb2R5XSkNCiAgICAgICAgcmV0dXJuIFsnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtODsnLCB7IHN0YXR1czogJ3JlamVjdGVkJywgcmVhc29uOiAnY29udGVudCcsIHRpY2tldF9pZDogJyd9LnRvX2pzb25dDQogICAgICBlbmQNCiAgICBlbmQNCg0KICAgICMgcmVqZWN0IHNwZWNpZmljIHNlbmRlcnMNCiAgICBpZiBfb3B0aW9uc1s6cmVqZWN0X3NlbmRlcl0ucHJlc2VudD8NCiAgICAgIHBhdHRlcm4gPSBSZWdleHAubmV3KF9vcHRpb25zWzpyZWplY3Rfc2VuZGVyXSkuZnJlZXplDQogICAgICBpZiBwYXR0ZXJuLm1hdGNoPyhhdHRyWzpCb2R5XSkNCiAgICAgICAgcmV0dXJuIFsnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtODsnLCB7IHN0YXR1czogJ3JlamVjdGVkJywgcmVhc29uOiAnc2VuZGVyJywgdGlja2V0X2lkOiAnJ30udG9fanNvbl0NCiAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgIyBwcmV2ZW50IGFscmVhZHkgY3JlYXRlZCBhcnRpY2xlcw0KICAgIGlmIFRpY2tldDo6QXJ0aWNsZS5maW5kX2J5KG1lc3NhZ2VfaWQ6IGF0dHJbOlNtc01lc3NhZ2VTaWRdKQ0KICAgICAgcmV0dXJuIFsnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtODsnLCB7IHN0YXR1czogJ3Byb2Nlc3NlZCcsIHJlYXNvbjogJ2R1cGxpY2F0ZScsIHRpY2tldF9pZDogJyd9LnRvX2pzb25dDQogICAgZW5kDQoNCiAgICAjIGZpbmQgc2VuZGVyDQogICAgdXNlciA9IFVzZXIud2hlcmUobW9iaWxlOiBhdHRyWzpGcm9tXSkub3JkZXIoOnVwZGF0ZWRfYXQpLmZpcnN0DQogICAgaWYgIXVzZXINCiAgICAgIF9mcm9tX2NvbW1lbnQsIHByZWZlcmVuY2VzID0gQ3RpOjpDYWxsZXJJZC5nZXRfY29tbWVudF9wcmVmZXJlbmNlcyhhdHRyWzpGcm9tXSwgJ2Zyb20nKQ0KICAgICAgaWYgcHJlZmVyZW5jZXMgJiYgcHJlZmVyZW5jZXNbJ2Zyb20nXSAmJiBwcmVmZXJlbmNlc1snZnJvbSddWzBdDQogICAgICAgIGlmIHByZWZlcmVuY2VzWydmcm9tJ11bMF1bJ2xldmVsJ10gPT0gJ2tub3duJyAmJiBwcmVmZXJlbmNlc1snZnJvbSddWzBdWydvYmplY3QnXSA9PSAnVXNlcicNCiAgICAgICAgICB1c2VyID0gVXNlci5maW5kX2J5KGlkOiBwcmVmZXJlbmNlc1snZnJvbSddWzBdWydvX2lkJ10pDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgIXVzZXINCiAgICAgIHVzZXIgPSBVc2VyLmNyZWF0ZSEoDQogICAgICAgIGZpcnN0bmFtZTogYXR0cls6RnJvbV0sDQogICAgICAgIG1vYmlsZTogICAgYXR0cls6RnJvbV0sDQogICAgICApDQogICAgZW5kDQoNCiAgICBVc2VySW5mby5jdXJyZW50X3VzZXJfaWQgPSB1c2VyLmlkDQoNCiAgICAjIGZpbmQgdGlja2V0DQogICAgYXJ0aWNsZV90eXBlX3NtcyA9IFRpY2tldDo6QXJ0aWNsZTo6VHlwZS5maW5kX2J5KG5hbWU6ICdzbXMnKQ0KICAgIHN0YXRlX2lkcyA9IFRpY2tldDo6U3RhdGUud2hlcmUobmFtZTogJXdbY2xvc2VkIG1lcmdlZCByZW1vdmVkXSkucGx1Y2soOmlkKQ0KICAgIHRpY2tldCA9IFRpY2tldC53aGVyZShjdXN0b21lcl9pZDogdXNlci5pZCwgY3JlYXRlX2FydGljbGVfdHlwZV9pZDogYXJ0aWNsZV90eXBlX3Ntcy5pZCkud2hlcmUubm90KHN0YXRlX2lkOiBzdGF0ZV9pZHMpLm9yZGVyKDp1cGRhdGVkX2F0KS5maXJzdA0KICAgIHRpY2tldF9hY3Rpb24gPSAnY3JlYXRlZCcNCg0KICAgIGlmIHRpY2tldA0KICAgICAgdGlja2V0X2FjdGlvbiA9ICd1cGRhdGVkJw0KICAgICAgbmV3X3N0YXRlID0gVGlja2V0OjpTdGF0ZS5maW5kX2J5KGRlZmF1bHRfY3JlYXRlOiB0cnVlKQ0KICAgICAgaWYgdGlja2V0LnN0YXRlX2lkICE9IG5ld19zdGF0ZS5pZA0KICAgICAgICB0aWNrZXQuc3RhdGUgPSBUaWNrZXQ6OlN0YXRlLmZpbmRfYnkoZGVmYXVsdF9mb2xsb3dfdXA6IHRydWUpDQogICAgICAgIHRpY2tldC5zYXZlIQ0KICAgICAgZW5kDQogICAgZWxzZQ0KICAgICAgaWYgY2hhbm5lbC5ncm91cF9pZC5ibGFuaz8NCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uczo6VW5wcm9jZXNzYWJsZUVudGl0eSwgJ0dyb3VwIG5lZWRlZCBpbiBjaGFubmVsIGRlZmluaXRpb24hJw0KICAgICAgZW5kDQoNCiAgICAgIGdyb3VwID0gR3JvdXAuZmluZF9ieShpZDogY2hhbm5lbC5ncm91cF9pZCkNCiAgICAgIGlmICFncm91cA0KICAgICAgICByYWlzZSBFeGNlcHRpb25zOjpVbnByb2Nlc3NhYmxlRW50aXR5LCAnR3JvdXAgaXMgaW52YWxpZCEnDQogICAgICBlbmQNCg0KICAgICAgdGl0bGUgPSBhdHRyWzpCb2R5XQ0KICAgICAgaWYgdGl0bGUubGVuZ3RoID4gNDANCiAgICAgICAgdGl0bGUgPSAiI3t0aXRsZVswLCA0MF19Li4uIg0KICAgICAgZW5kDQogICAgICB0aWNrZXQgPSBUaWNrZXQubmV3KA0KICAgICAgICBncm91cF9pZDogICAgY2hhbm5lbC5ncm91cF9pZCwNCiAgICAgICAgdGl0bGU6ICAgICAgIHRpdGxlLA0KICAgICAgICBzdGF0ZV9pZDogICAgVGlja2V0OjpTdGF0ZS5maW5kX2J5KGRlZmF1bHRfY3JlYXRlOiB0cnVlKS5pZCwNCiAgICAgICAgcHJpb3JpdHlfaWQ6IFRpY2tldDo6UHJpb3JpdHkuZmluZF9ieShkZWZhdWx0X2NyZWF0ZTogdHJ1ZSkuaWQsDQogICAgICAgIGN1c3RvbWVyX2lkOiB1c2VyLmlkLA0KICAgICAgICBwcmVmZXJlbmNlczogew0KICAgICAgICAgIGNoYW5uZWxfaWQ6IGNoYW5uZWwuaWQsDQogICAgICAgICAgc21zOiAgICAgICAgew0KICAgICAgICAgICAgQWNjb3VudFNpZDogYXR0clsnQWNjb3VudFNpZCddLA0KICAgICAgICAgICAgRnJvbTogICAgICAgYXR0clsnRnJvbSddLA0KICAgICAgICAgICAgVG86ICAgICAgICAgYXR0clsnVG8nXSwNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICkNCiAgICAgIHRpY2tldC5zYXZlIQ0KICAgIGVuZA0KDQogICAgVGlja2V0OjpBcnRpY2xlLmNyZWF0ZSEoDQogICAgICB0aWNrZXRfaWQ6ICAgIHRpY2tldC5pZCwNCiAgICAgIHR5cGU6ICAgICAgICAgYXJ0aWNsZV90eXBlX3NtcywNCiAgICAgIHNlbmRlcjogICAgICAgVGlja2V0OjpBcnRpY2xlOjpTZW5kZXIuZmluZF9ieShuYW1lOiAnQ3VzdG9tZXInKSwNCiAgICAgIGJvZHk6ICAgICAgICAgYXR0cls6Qm9keV0sDQogICAgICBmcm9tOiAgICAgICAgIGF0dHJbOkZyb21dLA0KICAgICAgdG86ICAgICAgICAgICBhdHRyWzpUb10sDQogICAgICBtZXNzYWdlX2lkOiAgIGF0dHJbOlNtc01lc3NhZ2VTaWRdLA0KICAgICAgY29udGVudF90eXBlOiAndGV4dC9wbGFpbicsDQogICAgICBwcmVmZXJlbmNlczogIHsNCiAgICAgICAgY2hhbm5lbF9pZDogY2hhbm5lbC5pZCwNCiAgICAgICAgc21zOiAgICAgICAgew0KICAgICAgICAgIEFjY291bnRTaWQ6IGF0dHJbJ0FjY291bnRTaWQnXSwNCiAgICAgICAgICBGcm9tOiAgICAgICBhdHRyWydGcm9tJ10sDQogICAgICAgICAgVG86ICAgICAgICAgYXR0clsnVG8nXSwNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICkNCg0KICAgIFsnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtODsnLCB7IHN0YXR1czogdGlja2V0X2FjdGlvbiwgdGlja2V0X2lkOiB0aWNrZXQuaWQgfS50b19qc29uXQ0KICBlbmQNCg0KICBkZWYgc2VsZi5kZWZpbml0aW9uDQogICAgew0KICAgICAgbmFtZTogICAgICAgICAnbm93c21zJywNCiAgICAgIGFkYXB0ZXI6ICAgICAgJ3Ntcy9ub3dzbXMnLA0KICAgICAgYWNjb3VudDogICAgICBbDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OmdhdGV3YXknLCBkaXNwbGF5OiAnR2F0ZXdheSBVUkwnLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnaHR0cDovL3NlcnZlci5pcC5hZGRyOjg4MDAnIH0sDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OndlYmhvb2tfdG9rZW4nLCBkaXNwbGF5OiAnV2ViaG9vayBUb2tlbicsIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgZGVmYXVsdDogRGlnZXN0OjpNRDUuaGV4ZGlnZXN0KHJhbmQoOTk5Xzk5OV85OTlfOTk5KS50b19zKSwgZGlzYWJsZWQ6IHRydWUsIHJlYWRvbmx5OiB0cnVlIH0sDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OmFjY291bnRfaWQnLCBkaXNwbGF5OiAnTm93U01TIHVzZXJuYW1lJywgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJ1hYWFhYWCcgfSwNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6dG9rZW4nLCBkaXNwbGF5OiAnTm93U01TIHBhc3N3b3JkJywgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlIH0sDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OnNlbmRlcicsIGRpc3BsYXk6ICdTZW5kZXInLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnKzQxNzkwMDAwMDAwJyB9LA0KICAgICAgICB7IG5hbWU6ICdvcHRpb25zOjpyZWplY3RfbXNnJywgZGlzcGxheTogJ1JlamVjdCBtZXNzYWdlcyAocmVnZXhwKScsIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgcGxhY2Vob2xkZXI6ICcuKmxvb3BfY2hlY2suKnwuKnRlc3Rfb25seS4qJyB9LA0KICAgICAgICB7IG5hbWU6ICdvcHRpb25zOjpyZWplY3Rfc2VuZGVyJywgZGlzcGxheTogJ1JlamVjdCBzZW5kZXJzIChyZWdleHApJywgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJ3NwYW1fbnVtYmVyfFwrNDE5OS4qJyB9LA0KICAgICAgICB7IG5hbWU6ICdncm91cF9pZCcsIGRpc3BsYXk6ICdEZXN0aW5hdGlvbiBHcm91cCcsIHRhZzogJ3NlbGVjdCcsIG51bGw6IGZhbHNlLCByZWxhdGlvbjogJ0dyb3VwJywgbnVsbG9wdGlvbjogdHJ1ZSwgZmlsdGVyOiB7IGFjdGl2ZTogdHJ1ZSB9IH0sDQogICAgICBdLA0KICAgICAgbm90aWZpY2F0aW9uOiBbDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OmdhdGV3YXknLCBkaXNwbGF5OiAnR2F0ZXdheSBVUkwnLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnaHR0cDovL3NlcnZlci5pcC5hZGRyOjg4MDAnIH0sDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OmFjY291bnRfaWQnLCBkaXNwbGF5OiAnTm93U01TIHVzZXJuYW1lJywgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJ1hYWFhYWCcgfSwNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6dG9rZW4nLCBkaXNwbGF5OiAnTm93U01TIHBhc3N3b3JkJywgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlIH0sDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OnNlbmRlcicsIGRpc3BsYXk6ICdTZW5kZXInLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnKzQxNzkwMDAwMDAwJyB9LA0KICAgICAgXSwNCiAgICB9DQogIGVuZA0KDQplbmQNCg=="
    }
  ]
}
