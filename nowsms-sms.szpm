{
  "name": "2-way NowSMS gateway",
  "version": "1.0.12",
  "vendor": "SysCo systemes de communication sa",
  "license": "MIT",
  "url": "https://www.sysco.ch/",
  "buildhost": "build.sysco.ch",
  "builddate": "2023-09-23 06:00:00 UTC",
  "change_log": [
    {
      "version": "1.0.12",
      "date": "2023-09-23 06:00:00 UTC",
      "log": "Fix to be compatible with the last faraday library"
    },
    {
      "version": "1.0.11",
      "date": "2021-01-07 17:00:00 UTC",
      "log": "Regexp to ignore content or sender"
    },
    {
      "version": "1.0.9",
      "date": "2021-01-07 14:35:00 UTC",
      "log": "2-way SMS implementation"
    },
    {
      "version": "1.0.0",
      "date": "2021-01-07 08:00:00 UTC",
      "log": "Initial version (send only)"
    }
  ],
  "description": [
    {
      "language": "en",
      "text": "2-way SMS implementation for NowSMS local gateway (https://www.nowsms.com/)"
    }
  ],
  "files": [
    {
      "location": "app/models/channel/driver/sms/nowsms.rb",
      "permission": 644,
      "encode": "base64",
      "content": "IyBWZXJzaW9uIDEuMC4xMg0KIw0KIyBXZWJob29rIHBhcmFtZXRlcnMgaW4gTm93U01TIDogLz9TbXNNZXNzYWdlU2lkPUBARlVMTFNNU0BAJkFjY291bnRTaWQ9c21zJkZyb209QEBTRU5ERVJAQCZUbz1AQFJFQ0lQQEAmQm9keT1AQEZVTExTTVNAQCZJZ25vcmVSZWdleHA9Li4uDQojDQojIE5vd1NNUyBkb2N1bWVudGF0aW9uIDogaHR0cHM6Ly93d3cubm93c21zLmNvbS9kb2MvMi13YXktc21zLXN1cHBvcnQNCiMNCiMgQmFzZWQgb24gYXBwL21vZGVscy9jaGFubmVsL2RyaXZlci9zbXMvdHdpbGlvLnJiDQojIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9sY3gvemFtbWFkLXNtcy1jbG91ZHZveA0KIw0KIyBJbiBvcmRlciB0byBtYWtlIGFuIGluc3RhbGxhYmxlIHBhY2thZ2UsIHRoaXMgZmlsZSBuZWVkIHRvDQojIGJlIGJhc2U2NCBlbmNvZGVkIGluc2lkZSBub3dzbXMtc21zLnN6cG0NCiMgKGJ5IHVzaW5nIGZvciBleGFtcGxlIGh0dHBzOi8vYmFzZTY0Lmd1cnUvY29udmVydGVyL2VuY29kZS90ZXh0KQ0KIw0KIyBDb3B5cmlnaHQgKGMpIDIwMjEtMjAyMyBTeXNDbyBzeXN0ZW1lcyBkZSBjb21tdW5pY2F0aW9uIHNhIC0gaHR0cHM6Ly93d3cuc3lzY28uY2gNCg0KY2xhc3MgQ2hhbm5lbDo6RHJpdmVyOjpTbXM6Ok5vd3Ntcw0KICBOQU1FID0gJ3Ntcy9ub3dzbXMnLmZyZWV6ZQ0KDQogIGRlZiBmZXRjaGFibGU/KF9jaGFubmVsKQ0KICAgIGZhbHNlDQogIGVuZA0KDQogIGRlZiBzZW5kKG9wdGlvbnMsIGF0dHIsIF9ub3RpZmljYXRpb24gPSBmYWxzZSkNCiAgICBSYWlscy5sb2dnZXIuaW5mbyAiU2VuZGluZyBTTVMgdG8gI3thdHRyWzpyZWNpcGllbnRdfSINCg0KICAgIHJldHVybiB0cnVlIGlmIFNldHRpbmcuZ2V0KCdpbXBvcnRfbW9kZScpDQoNCiAgICBSYWlscy5sb2dnZXIuaW5mbyAiQmFja2VuZCBzZW5kaW5nIE5vd1NNUyBTTVMgdG8gI3thdHRyWzpyZWNpcGllbnRdfSINCiAgICBiZWdpbg0KICAgICAgaWYgU2V0dGluZy5nZXQoJ2RldmVsb3Blcl9tb2RlJykgIT0gdHJ1ZQ0KICAgICAgICBjb25uID0gRmFyYWRheS5uZXcodXJsOiBvcHRpb25zWzpnYXRld2F5XSkNCiAgICAgICAgcmVzcG9uc2UgPSBjb25uLmdldCgiLyIsIHsgOlVzZXIgPT4gb3B0aW9uc1s6YWNjb3VudF9pZF0sIDpQYXNzd29yZCA9PiBvcHRpb25zWzp0b2tlbl0sIDpQaG9uZU51bWJlciA9PiBhdHRyWzpyZWNpcGllbnRdLnJlbW92ZSgvXEQvKSwgOlRleHQgPT4gYXR0cls6bWVzc2FnZV19KQ0KICAgICAgICByYWlzZSByZXNwb25zZS5ib2R5IGlmICFyZXNwb25zZS5ib2R5Lm1hdGNoPygnTWVzc2FnZSBTdWJtaXR0ZWQnKQ0KICAgICAgZW5kDQoNCiAgICAgIHRydWUNCiAgICByZXNjdWUgPT4gZQ0KICAgICAgUmFpbHMubG9nZ2VyLmRlYnVnICJOb3dTTVMgZXJyb3I6ICN7ZS5pbnNwZWN0fSINCiAgICAgIHJhaXNlIGUNCiAgICBlbmQNCiAgZW5kDQoNCiAgZGVmIHByb2Nlc3MoX29wdGlvbnMsIGF0dHIsIGNoYW5uZWwpDQogICAgUmFpbHMubG9nZ2VyLmluZm8gIlJlY2VpdmluZyBTTVMgZnJvbSByZWNpcGllbnQgI3thdHRyWzpGcm9tXX0iDQoNCiAgICAjIHJlamVjdCBzcGVjaWZpYyBjb250ZW50cw0KICAgIGlmIF9vcHRpb25zWzpyZWplY3RfbXNnXS5wcmVzZW50Pw0KICAgICAgcGF0dGVybiA9IFJlZ2V4cC5uZXcoX29wdGlvbnNbOnJlamVjdF9tc2ddKS5mcmVlemUNCiAgICAgIGlmIHBhdHRlcm4ubWF0Y2g/KGF0dHJbOkJvZHldKQ0KICAgICAgICByZXR1cm4gWydhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04OycsIHsgc3RhdHVzOiAncmVqZWN0ZWQnLCByZWFzb246ICdjb250ZW50JywgdGlja2V0X2lkOiAnJ30udG9fanNvbl0NCiAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgIyByZWplY3Qgc3BlY2lmaWMgc2VuZGVycw0KICAgIGlmIF9vcHRpb25zWzpyZWplY3Rfc2VuZGVyXS5wcmVzZW50Pw0KICAgICAgcGF0dGVybiA9IFJlZ2V4cC5uZXcoX29wdGlvbnNbOnJlamVjdF9zZW5kZXJdKS5mcmVlemUNCiAgICAgIGlmIHBhdHRlcm4ubWF0Y2g/KGF0dHJbOkJvZHldKQ0KICAgICAgICByZXR1cm4gWydhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04OycsIHsgc3RhdHVzOiAncmVqZWN0ZWQnLCByZWFzb246ICdzZW5kZXInLCB0aWNrZXRfaWQ6ICcnfS50b19qc29uXQ0KICAgICAgZW5kDQogICAgZW5kDQoNCiAgICAjIHByZXZlbnQgYWxyZWFkeSBjcmVhdGVkIGFydGljbGVzDQogICAgaWYgVGlja2V0OjpBcnRpY2xlLmZpbmRfYnkobWVzc2FnZV9pZDogYXR0cls6U21zTWVzc2FnZVNpZF0pDQogICAgICByZXR1cm4gWydhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04OycsIHsgc3RhdHVzOiAncHJvY2Vzc2VkJywgcmVhc29uOiAnZHVwbGljYXRlJywgdGlja2V0X2lkOiAnJ30udG9fanNvbl0NCiAgICBlbmQNCg0KICAgICMgZmluZCBzZW5kZXINCiAgICB1c2VyID0gVXNlci53aGVyZShtb2JpbGU6IGF0dHJbOkZyb21dKS5vcmRlcig6dXBkYXRlZF9hdCkuZmlyc3QNCiAgICBpZiAhdXNlcg0KICAgICAgX2Zyb21fY29tbWVudCwgcHJlZmVyZW5jZXMgPSBDdGk6OkNhbGxlcklkLmdldF9jb21tZW50X3ByZWZlcmVuY2VzKGF0dHJbOkZyb21dLCAnZnJvbScpDQogICAgICBpZiBwcmVmZXJlbmNlcyAmJiBwcmVmZXJlbmNlc1snZnJvbSddICYmIHByZWZlcmVuY2VzWydmcm9tJ11bMF0NCiAgICAgICAgaWYgcHJlZmVyZW5jZXNbJ2Zyb20nXVswXVsnbGV2ZWwnXSA9PSAna25vd24nICYmIHByZWZlcmVuY2VzWydmcm9tJ11bMF1bJ29iamVjdCddID09ICdVc2VyJw0KICAgICAgICAgIHVzZXIgPSBVc2VyLmZpbmRfYnkoaWQ6IHByZWZlcmVuY2VzWydmcm9tJ11bMF1bJ29faWQnXSkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiAhdXNlcg0KICAgICAgdXNlciA9IFVzZXIuY3JlYXRlISgNCiAgICAgICAgZmlyc3RuYW1lOiBhdHRyWzpGcm9tXSwNCiAgICAgICAgbW9iaWxlOiAgICBhdHRyWzpGcm9tXSwNCiAgICAgICkNCiAgICBlbmQNCg0KICAgIFVzZXJJbmZvLmN1cnJlbnRfdXNlcl9pZCA9IHVzZXIuaWQNCg0KICAgICMgZmluZCB0aWNrZXQNCiAgICBhcnRpY2xlX3R5cGVfc21zID0gVGlja2V0OjpBcnRpY2xlOjpUeXBlLmZpbmRfYnkobmFtZTogJ3NtcycpDQogICAgc3RhdGVfaWRzID0gVGlja2V0OjpTdGF0ZS53aGVyZShuYW1lOiAld1tjbG9zZWQgbWVyZ2VkIHJlbW92ZWRdKS5wbHVjayg6aWQpDQogICAgdGlja2V0ID0gVGlja2V0LndoZXJlKGN1c3RvbWVyX2lkOiB1c2VyLmlkLCBjcmVhdGVfYXJ0aWNsZV90eXBlX2lkOiBhcnRpY2xlX3R5cGVfc21zLmlkKS53aGVyZS5ub3Qoc3RhdGVfaWQ6IHN0YXRlX2lkcykub3JkZXIoOnVwZGF0ZWRfYXQpLmZpcnN0DQogICAgdGlja2V0X2FjdGlvbiA9ICdjcmVhdGVkJw0KDQogICAgaWYgdGlja2V0DQogICAgICB0aWNrZXRfYWN0aW9uID0gJ3VwZGF0ZWQnDQogICAgICBuZXdfc3RhdGUgPSBUaWNrZXQ6OlN0YXRlLmZpbmRfYnkoZGVmYXVsdF9jcmVhdGU6IHRydWUpDQogICAgICBpZiB0aWNrZXQuc3RhdGVfaWQgIT0gbmV3X3N0YXRlLmlkDQogICAgICAgIHRpY2tldC5zdGF0ZSA9IFRpY2tldDo6U3RhdGUuZmluZF9ieShkZWZhdWx0X2ZvbGxvd191cDogdHJ1ZSkNCiAgICAgICAgdGlja2V0LnNhdmUhDQogICAgICBlbmQNCiAgICBlbHNlDQogICAgICBpZiBjaGFubmVsLmdyb3VwX2lkLmJsYW5rPw0KICAgICAgICByYWlzZSBFeGNlcHRpb25zOjpVbnByb2Nlc3NhYmxlRW50aXR5LCAnR3JvdXAgbmVlZGVkIGluIGNoYW5uZWwgZGVmaW5pdGlvbiEnDQogICAgICBlbmQNCg0KICAgICAgZ3JvdXAgPSBHcm91cC5maW5kX2J5KGlkOiBjaGFubmVsLmdyb3VwX2lkKQ0KICAgICAgaWYgIWdyb3VwDQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbnM6OlVucHJvY2Vzc2FibGVFbnRpdHksICdHcm91cCBpcyBpbnZhbGlkIScNCiAgICAgIGVuZA0KDQogICAgICB0aXRsZSA9IGF0dHJbOkJvZHldDQogICAgICBpZiB0aXRsZS5sZW5ndGggPiA0MA0KICAgICAgICB0aXRsZSA9ICIje3RpdGxlWzAsIDQwXX0uLi4iDQogICAgICBlbmQNCiAgICAgIHRpY2tldCA9IFRpY2tldC5uZXcoDQogICAgICAgIGdyb3VwX2lkOiAgICBjaGFubmVsLmdyb3VwX2lkLA0KICAgICAgICB0aXRsZTogICAgICAgdGl0bGUsDQogICAgICAgIHN0YXRlX2lkOiAgICBUaWNrZXQ6OlN0YXRlLmZpbmRfYnkoZGVmYXVsdF9jcmVhdGU6IHRydWUpLmlkLA0KICAgICAgICBwcmlvcml0eV9pZDogVGlja2V0OjpQcmlvcml0eS5maW5kX2J5KGRlZmF1bHRfY3JlYXRlOiB0cnVlKS5pZCwNCiAgICAgICAgY3VzdG9tZXJfaWQ6IHVzZXIuaWQsDQogICAgICAgIHByZWZlcmVuY2VzOiB7DQogICAgICAgICAgY2hhbm5lbF9pZDogY2hhbm5lbC5pZCwNCiAgICAgICAgICBzbXM6ICAgICAgICB7DQogICAgICAgICAgICBBY2NvdW50U2lkOiBhdHRyWydBY2NvdW50U2lkJ10sDQogICAgICAgICAgICBGcm9tOiAgICAgICBhdHRyWydGcm9tJ10sDQogICAgICAgICAgICBUbzogICAgICAgICBhdHRyWydUbyddLA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgKQ0KICAgICAgdGlja2V0LnNhdmUhDQogICAgZW5kDQoNCiAgICBUaWNrZXQ6OkFydGljbGUuY3JlYXRlISgNCiAgICAgIHRpY2tldF9pZDogICAgdGlja2V0LmlkLA0KICAgICAgdHlwZTogICAgICAgICBhcnRpY2xlX3R5cGVfc21zLA0KICAgICAgc2VuZGVyOiAgICAgICBUaWNrZXQ6OkFydGljbGU6OlNlbmRlci5maW5kX2J5KG5hbWU6ICdDdXN0b21lcicpLA0KICAgICAgYm9keTogICAgICAgICBhdHRyWzpCb2R5XSwNCiAgICAgIGZyb206ICAgICAgICAgYXR0cls6RnJvbV0sDQogICAgICB0bzogICAgICAgICAgIGF0dHJbOlRvXSwNCiAgICAgIG1lc3NhZ2VfaWQ6ICAgYXR0cls6U21zTWVzc2FnZVNpZF0sDQogICAgICBjb250ZW50X3R5cGU6ICd0ZXh0L3BsYWluJywNCiAgICAgIHByZWZlcmVuY2VzOiAgew0KICAgICAgICBjaGFubmVsX2lkOiBjaGFubmVsLmlkLA0KICAgICAgICBzbXM6ICAgICAgICB7DQogICAgICAgICAgQWNjb3VudFNpZDogYXR0clsnQWNjb3VudFNpZCddLA0KICAgICAgICAgIEZyb206ICAgICAgIGF0dHJbJ0Zyb20nXSwNCiAgICAgICAgICBUbzogICAgICAgICBhdHRyWydUbyddLA0KICAgICAgICB9DQogICAgICB9DQogICAgKQ0KDQogICAgWydhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04OycsIHsgc3RhdHVzOiB0aWNrZXRfYWN0aW9uLCB0aWNrZXRfaWQ6IHRpY2tldC5pZCB9LnRvX2pzb25dDQogIGVuZA0KDQogIGRlZiBzZWxmLmRlZmluaXRpb24NCiAgICB7DQogICAgICBuYW1lOiAgICAgICAgICdub3dzbXMnLA0KICAgICAgYWRhcHRlcjogICAgICAnc21zL25vd3NtcycsDQogICAgICBhY2NvdW50OiAgICAgIFsNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6Z2F0ZXdheScsIGRpc3BsYXk6ICdHYXRld2F5IFVSTCcsIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgcGxhY2Vob2xkZXI6ICdodHRwOi8vc2VydmVyLmlwLmFkZHI6ODgwMCcgfSwNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6d2ViaG9va190b2tlbicsIGRpc3BsYXk6ICdXZWJob29rIFRva2VuJywgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBkZWZhdWx0OiBEaWdlc3Q6Ok1ENS5oZXhkaWdlc3QocmFuZCg5OTlfOTk5Xzk5OV85OTkpLnRvX3MpLCBkaXNhYmxlZDogdHJ1ZSwgcmVhZG9ubHk6IHRydWUgfSwNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6YWNjb3VudF9pZCcsIGRpc3BsYXk6ICdOb3dTTVMgdXNlcm5hbWUnLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnWFhYWFhYJyB9LA0KICAgICAgICB7IG5hbWU6ICdvcHRpb25zOjp0b2tlbicsIGRpc3BsYXk6ICdOb3dTTVMgcGFzc3dvcmQnLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UgfSwNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6c2VuZGVyJywgZGlzcGxheTogJ1NlbmRlcicsIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgcGxhY2Vob2xkZXI6ICcrNDE3OTAwMDAwMDAnIH0sDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OnJlamVjdF9tc2cnLCBkaXNwbGF5OiAnUmVqZWN0IG1lc3NhZ2VzIChyZWdleHApJywgdGFnOiAnaW5wdXQnLCB0eXBlOiAndGV4dCcsIGxpbWl0OiAyMDAsIG51bGw6IGZhbHNlLCBwbGFjZWhvbGRlcjogJy4qbG9vcF9jaGVjay4qfC4qdGVzdF9vbmx5LionIH0sDQogICAgICAgIHsgbmFtZTogJ29wdGlvbnM6OnJlamVjdF9zZW5kZXInLCBkaXNwbGF5OiAnUmVqZWN0IHNlbmRlcnMgKHJlZ2V4cCknLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnc3BhbV9udW1iZXJ8XCs0MTk5LionIH0sDQogICAgICAgIHsgbmFtZTogJ2dyb3VwX2lkJywgZGlzcGxheTogJ0Rlc3RpbmF0aW9uIEdyb3VwJywgdGFnOiAnc2VsZWN0JywgbnVsbDogZmFsc2UsIHJlbGF0aW9uOiAnR3JvdXAnLCBudWxsb3B0aW9uOiB0cnVlLCBmaWx0ZXI6IHsgYWN0aXZlOiB0cnVlIH0gfSwNCiAgICAgIF0sDQogICAgICBub3RpZmljYXRpb246IFsNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6Z2F0ZXdheScsIGRpc3BsYXk6ICdHYXRld2F5IFVSTCcsIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgcGxhY2Vob2xkZXI6ICdodHRwOi8vc2VydmVyLmlwLmFkZHI6ODgwMCcgfSwNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6YWNjb3VudF9pZCcsIGRpc3BsYXk6ICdOb3dTTVMgdXNlcm5hbWUnLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UsIHBsYWNlaG9sZGVyOiAnWFhYWFhYJyB9LA0KICAgICAgICB7IG5hbWU6ICdvcHRpb25zOjp0b2tlbicsIGRpc3BsYXk6ICdOb3dTTVMgcGFzc3dvcmQnLCB0YWc6ICdpbnB1dCcsIHR5cGU6ICd0ZXh0JywgbGltaXQ6IDIwMCwgbnVsbDogZmFsc2UgfSwNCiAgICAgICAgeyBuYW1lOiAnb3B0aW9uczo6c2VuZGVyJywgZGlzcGxheTogJ1NlbmRlcicsIHRhZzogJ2lucHV0JywgdHlwZTogJ3RleHQnLCBsaW1pdDogMjAwLCBudWxsOiBmYWxzZSwgcGxhY2Vob2xkZXI6ICcrNDE3OTAwMDAwMDAnIH0sDQogICAgICBdLA0KICAgIH0NCiAgZW5kDQoNCmVuZA0K"
    }
  ]
}
